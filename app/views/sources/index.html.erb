<div class="d-flex justify-content-between align-items-center border-bottom pb-2 mb-4 mt-3">
  <div>
    <h2 class="fw-bold mb-0">Sources</h2>
    <p class="text-muted small">Manage data collection sources</p>
  </div>
  <div class="btn-group">
    <% Source.display_names.each_with_index do |type, index| %>
      <%= link_to new_sources_path(type: type),
                  class: "btn btn-primary btn-sm equal-width-btn",
                  style: "width: 140px; #{index > 0 ? 'border-left: 2px solid #0d6efd;' : ''}" do %>
        <i class="bi bi-plus-circle me-1"></i> <%= type.camelize %>
      <% end %>
    <% end %>
  </div>
</div>

<%= render partial: "shared/search_form", locals: {
  url: sources_path,
  placeholder: "Search by name..."
} %>

<div id="sources">
  <%= turbo_frame_tag :sources_page, @pagy.page, target: :_top do %>
    <% if @sources.empty? %>
      <div class="alert alert-info text-center">
        <p class="mb-0">No sources found.</p>
      </div>
    <% else %>
      <%= render partial: "sources/source", collection: @sources, locals: {inline: true} %>
    <% end %>

    <% if @pagy.next %>
      <%= turbo_frame_tag :sources_page, @pagy.next, src: sources_path(page: @pagy.next), loading: :lazy, target: :_top do %>
        <%= tag.div "Loading..." %>
      <% end %>
    <% end %>
  <% end %>
</div>
<div class="d-flex justify-content-between align-items-center border-bottom pb-2 mb-4 mt-3">
  <div>
    <h2 class="fw-bold mb-0">Destinations</h2>
    <p class="text-muted small">Manage data export destinations</p>
  </div>
  <div class="btn-group">
  </div>
</div>

<%= render partial: "shared/search_form", locals: {
  url: destinations_path,
  placeholder: "Search by name..."
} %>

<div id="destinations">
  <%= turbo_frame_tag :destinations_page, @pagy.page, target: :_top do %>
    <% if @destinations.empty? %>
      <div class="alert alert-info text-center">
        <p class="mb-0">No destinations found.</p>
      </div>
    <% else %>
      <%= render partial: "destinations/destination", collection: @destinations %>
    <% end %>

    <% if @pagy.next %>
      <%= turbo_frame_tag :destinations_page, @pagy.next, src: destinations_path(page: @pagy.next), loading: :lazy, target: :_top do %>
        <%= tag.div "Loading..." %>
      <% end %>
    <% end %>
  <% end %>
</div>
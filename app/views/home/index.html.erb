<div class="dashboard-container">
  <div class="d-flex justify-content-between align-items-center border-bottom pb-2 mb-4 mt-3">
    <div>
      <h2 class="fw-bold mb-0">Dashboard</h2>
      <p class="text-muted small">System overview and statistics</p>
    </div>
    <div class="btn-group">
      <button class="btn btn-outline-secondary btn-sm" title="Refresh dashboard" onclick="window.location.reload()">
        <i class="bi bi-arrow-repeat"></i> Refresh
      </button>
    </div>
  </div>

  <!-- Stats Cards Section -->
  <div class="row mb-4">
    <%= render partial: "stats", locals: { title: "Sources", count: @stats[:sources_count], width: 3 } %>
    <%= render partial: "stats", locals: { title: "Collections", count: @stats[:collections_count], width: 3 } %>
    <%= render partial: "stats", locals: { title: "Records", count: @stats[:records_count], width: 3 } %>
    <%= render partial: "stats", locals: { title: "Destinations", count: @stats[:destinations_count], width: 3 } %>
  </div>

  <!-- Sources with Collections / Collections with Records Section -->
  <div class="row mb-4">
    <div class="col-6">
      <%= render partial: "top_items_card", locals: {
        title: "Top 5 sources by no. of collections",
        items: @sources_with_collections,
        item_label: "Source",
        count_label: "Collections",
        item_path: ->(item) { source_path(item) },
        count_method: ->(item) { item.collections_count },
        empty_message: "No sources available yet.",
        button_text: "View all sources",
        button_path: sources_path,
        button_alignment: ""
      } %>
    </div>
    <div class="col-6">
      <%= render partial: "top_items_card", locals: {
        title: "Top 5 collections by no. of records",
        items: @collections_with_records,
        item_label: "Collection",
        count_label: "Records",
        item_path: ->(item) { collection_path(item) },
        count_method: ->(item) { item.records_count },
        empty_message: "No collections available yet.",
        button_text: "Search for records",
        button_path: records_path,
        button_alignment: "text-end"
      } %>
    </div>
  </div>

  <!-- Recent Activity Section (Placeholder) -->
  <div class="row">
    <div class="col-md-6">
      <div class="card">
        <div class="card-body">
          <h5>Recent Imports</h5>
          <p class="text-muted">Future feature: Recent import activity will be displayed here.</p>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="card">
        <div class="card-body">
          <h5>Recent Transfers</h5>
          <p class="text-muted">Future feature: Recent transfer activity will be displayed here.</p>
        </div>
      </div>
    </div>
  </div>
</div>